(this["webpackJsonpledger-front"]=this["webpackJsonpledger-front"]||[]).push([[0],{141:function(e,t,a){e.exports={button:"style_button__1-yC-",draw:"style_draw__16LGv",meet:"style_meet__Cj1ZO",center:"style_center__37YoZ",circle:"style_circle__danET",ghost:"style_ghost__3AiUL",noGhost:"style_noGhost__Q4tUV",large:"style_large__ujxyl",normal:"style_normal__3wuwn",small:"style_small__2eslg",bg:"style_bg__34HI-",formContent:"style_formContent__1SJi-",inputStyle:"style_inputStyle__17zPb",spaceBetween:"style_spaceBetween__1nx1z",title:"style_title__W-RgL",extra:"style_extra__3ThBG",search:"style_search__YIKiT",label:"style_label__cjn9v",scrollYBar:"style_scrollYBar__2NkiJ",labelList:"style_labelList__DQyCR",active:"style_active__2Skb4"}},182:function(e,t,a){},186:function(e,t,a){e.exports={button:"style_button__18MmC",draw:"style_draw__fqLWS",meet:"style_meet__1Hx3-",center:"style_center__18TKB",circle:"style_circle__2BP6L",ghost:"style_ghost__3UIqi",noGhost:"style_noGhost__zgrfe",large:"style_large__PR3NZ",normal:"style_normal__tt1Nq",small:"style_small__3zKuI",bg:"style_bg__1AlSG",formContent:"style_formContent__2IRqc",inputStyle:"style_inputStyle__2a7hw",spaceBetween:"style_spaceBetween__1EMCs",title:"style_title__3m8nA",extra:"style_extra__1mRuy",search:"style_search__3bBv1",label:"style_label__1l3LF",scrollYBar:"style_scrollYBar__1V_LY",extend:"style_extend__2nd-e"}},187:function(e,t,a){e.exports={button:"style_button__14ofq",draw:"style_draw__3v6Ia",meet:"style_meet__3ywPP",center:"style_center__3GmU-",circle:"style_circle__2lQ0E",ghost:"style_ghost__3Hijq",noGhost:"style_noGhost__17Q3Q",large:"style_large__1I_xN",normal:"style_normal__2sr0T",small:"style_small__2edQd",bg:"style_bg__tpE8B",formContent:"style_formContent__bqp-b",inputStyle:"style_inputStyle__1N-JJ",spaceBetween:"style_spaceBetween__3Gx9A",title:"style_title__2MOKx",extra:"style_extra__DYgrX",search:"style_search__1Qord",label:"style_label__25ggP",scrollYBar:"style_scrollYBar__2ZhR3",link:"style_link__3XAh1"}},188:function(e,t,a){e.exports={button:"style_button__1ZBtC",draw:"style_draw__2UBuT",meet:"style_meet__1C6yd",center:"style_center__3Mhku",circle:"style_circle__2Lh9E",ghost:"style_ghost__3eNH5",noGhost:"style_noGhost__ptK58",large:"style_large__tC5cR",normal:"style_normal__1G7GC",small:"style_small__2FRps",bg:"style_bg__30J8u",formContent:"style_formContent__3T8CR",inputStyle:"style_inputStyle__tRr0Z",spaceBetween:"style_spaceBetween__2GHqy",title:"style_title__1LqWa",extra:"style_extra__QeCci",search:"style_search__1PKPW",label:"style_label__2RD-h",scrollYBar:"style_scrollYBar__3k7EI",content:"style_content__2-Aps"}},189:function(e,t,a){e.exports={button:"style_button__37Nzx",draw:"style_draw__3fEU5",meet:"style_meet__On3g8",center:"style_center__2X4bh",circle:"style_circle__2kjZP",ghost:"style_ghost__8qr_e",noGhost:"style_noGhost__2YwEf",large:"style_large__3tEpL",normal:"style_normal__2X6xb",small:"style_small__1TwF9",bg:"style_bg__2QkYY",formContent:"style_formContent__22Ev1",inputStyle:"style_inputStyle__261lf",spaceBetween:"style_spaceBetween__2NHPF",title:"style_title__3zOJQ",extra:"style_extra__3Lakl",search:"style_search__31h_4",label:"style_label__3cXt8",scrollYBar:"style_scrollYBar__2NeaU",customCard:"style_customCard__2PI5O"}},190:function(e,t,a){e.exports={empty:"style_empty__3Ybet"}},191:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADIElEQVR4Xu2auW8TURDGv3GEQkFKkLgbaGjpEEhJw38QxKFAsnbEIQ4R73IIiCIOcew6iEMcir0ORBwi/wENqUJFSwNUEAooEQiC4kFPSqQocuI368V+kWdbfzM7389v38zzmpDgikZ5O82gmzPYBkZHghTphRB+UAXvuQ3jfi+9kyYmaUA4wp3UhjfSuEboeQZdQT9NSO4lBhDFbMx3Sm7SQO2E71GX5H4iAMNjvKXyFx8kN2i0NrMCWwd66KPtfUUAXF7+c4alj4ECsF0qRqcrwOEOoI/ALAHdA4SzgG6CugkKCGgX0C5gfxBqbwc2bARWtguWWBXpz1/A1ylgetoujzNdoLMLWL3Gruhaqu/fgAnL86cTAIxxAyDNywAwIGpdTgAwRe7cBaxdV6tcu8+/fAbeTtppnQFgyt20GehYZVf4Yqrff4BP1odbwCkA9VlPFq0AdBSW/S6oZwHJk6ajsHAUbuku0NJzgE6C5s1JK58FzMba8qdBSXdJU6uToE6COgmKXpHrKCzZgHQUFo7CErhpabULaBfQLqBdQPJPMW2Dkt1X26C2QfuXo5KVlaZW54BlNgdMzX7769NaBctmBRBhT76Pxo3xQpm7mfEqDQjLAgBXsC/I0cv5hsMi76UMXtQLwXkAGcKBgT56Xs3ocJn3VxjP6oHgNoAKDvo5GlvKYFTkHmTwNCkElwH0+h49sTEWxXwIwKiNdqHGSQBEyOb7KJYYKpTZY0ZJEmO0LgLo9z0qSo0YfRRzDsCIJNYpAAwcCTx6LDGwUBvGfJiAR7Y5nAFAwLG8Rw9tC19KV4j5KAMPbHI5AYCBE4FH920KttWEMR8n4F4tfdMBMHAq8OhurUKTfB7GfJKAO0vFNhvAgO/R7STmbGOimE8DGF5M3zwADN/PUsHWSD26qMR5EKJqOZoF4Kzv0a16TEljo5jPALjZ/EGIcd7P0g2pgTT0UYnPgXB9fq6GrgAGLgYeXUvDTNIcYcwXCLg6F98wAMQYzGfpStLC04wrlPgSEy6bnP8VwOx4+poZk0GWhtI0UW+usMRDRNjhe7RbkusfklRbX2oEhV8AAAAASUVORK5CYII="},201:function(e,t,a){e.exports=a(328)},28:function(e,t,a){e.exports={button:"style_button__zPPcI",draw:"style_draw__3zqnx",meet:"style_meet__2QrTX",center:"style_center__jNEtR",circle:"style_circle__2zUxB",ghost:"style_ghost__2cgxE",noGhost:"style_noGhost__3ToU1",large:"style_large__3lcPT",normal:"style_normal__1cs7P",small:"style_small__24m7S",bg:"style_bg__1M-Z6",formContent:"style_formContent__1rI6_",inputStyle:"style_inputStyle__2rzBa",spaceBetween:"style_spaceBetween__3DQ6c",title:"style_title__12ZrL",extra:"style_extra__2_Vne",search:"style_search__3WDbM",label:"style_label__25cxq",scrollYBar:"style_scrollYBar__18J6U",wrapper:"style_wrapper__3D-78",container:"style_container__3Q8pe",sectionContainer:"style_sectionContainer__1l0tF",itemBox:"style_itemBox__1uqmu",itemTitle:"style_itemTitle__2x_3b",total:"style_total__1e_Ba",content:"style_content__3MLFU",expand:"style_expand__2SsWi",income:"style_income__wnAnT",topText:"style_topText__WaRA5",menuContent:"style_menuContent__276le",active:"style_active__2bcQN",date:"style_date__1_3b6",operation:"style_operation__JMUUH",icon:"style_icon__SVhkp",oper:"style_oper__17zCI"}},328:function(e,t,a){"use strict";a.r(t);var l=a(178),n=a(0),r=a.n(n),o=a(32),c=a.n(o),s=a(89),i=a(179),m=a(182),d=a.n(m);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(207);var _=a(19),u=a(29),b=a(88),y=a(193),p=a.n(y),f=(a(86),a(34)),h=a(13),g=a(20);function E(){return JSON.parse(localStorage.getItem("user"))}function v(){return localStorage.getItem("token")}function O(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]}var x=a(138),w=a.n(x),S=a(183),j=a.n(S),k={serverUrl:"http://localhost:9600"},C=w.a.create({paramsSerializer:function(e){return j.a.stringify(e)}});C.interceptors.request.use((function(e){"get"===e.method&&(e.params=e.data),e.headers["content-type"]||(e.headers["content-type"]="application/json;charset=UTF-8");var t=localStorage.getItem("token");return e.headers.common.Authorization="Bearer "+t,e}),(function(e){return Promise.reject(e)})),C.interceptors.response.use((function(e){console.log("process.env.ServerUrl",k.serverUrl);var t=e.data,a=e.status,l=t.code,n=t.data,r=t.message;if(200!==a){var o=r||"code:".concat(l," \u7cfb\u7edf\u9519\u8bef");return Promise.reject(o)}return n}),(function(e){if(w.a.isCancel(e))return Promise.reject(e);if(e.response){var t=e.response,a=t.data,l=t.status,n=t.statusText,r=(a||{}).message;401===l?(f.b.error("\u7528\u6237\u672a\u767b\u5f55, \u8bf7\u5148\u767b\u5f55"),window.localStorage.removeItem("token"),-1===window.location.href.indexOf("login")&&setTimeout((function(){window.location.href="".concat(k.serverUrl||"","/login")}),500)):f.b.error(l+" "+(r||n))}return Promise.reject(e)})),C.uploadFile=function(e,t,a){var l=new FormData;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&l.set(n,t[n]);return C(Object(g.a)({method:"POST",data:l},a))};var Y=C,B={sso:{logout:"POST /sso/logout",doLogin:"POST /sso/doLogin"},book:{addOne:"POST /api/book/addOne",findOne:"GET /api/book/findOne",findAll:"GET /api/book/findAll",findMultiple:"GET /api/book/findMultiple",updateOne:"POST /api/book/updateOne",deleteOne:"POST /api/book/deleteOne"},detail:{addOne:"POST /api/detail/addOne",addMultiple:"POST /api/detail/addMultiple",findAll:"GET /api/detail/findAll",updateOne:"POST /api/detail/updateOne",updateMultiple:"POST /api/detail/updateMultiple",deleteOne:"POST /api/detail/deleteOne"},label:{addOne:"POST /api/label/addOne",findAll:"GET /api/label/findAll",updateOne:"POST /api/label/updateOne",deleteOne:"POST /api/label/deleteOne"}},A=function(e,t){var a=e.split(" "),l=Object(h.a)(a,2),n=l[0],r=l[1],o={};return n=n.toLowerCase(),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y(Object(g.a)(Object(g.a)({url:r,data:e,method:n},o),t))}};for(var N in B)for(var L in B[N])B[N][L]=A(B[N][L]);var T=B,I=r.a.createContext({});function M(e){var t=!!v(),a=Object(n.useState)(t),l=Object(h.a)(a,2),r=l[0],o=l[1],c=Object(n.useState)(!1),s=Object(h.a)(c,2),i=s[0],m=s[1];return{logged:r,loggedChange:o,globalLoading:i,setGlobalLoading:m,logout:function(e){console.log("\u9000\u51fa"),T.sso.logout().then((function(e){f.b.success("\u5df2\u9000\u51fa")})).finally((function(){o(!1),localStorage.removeItem("token"),e&&e()}))}}}a(157);var P=a(67),R=(a(158),a(42)),D=a(47),G=a(5),W=a.n(G),F=a(55),z=a.n(F),q=a(186),U=a.n(q);function H(e){e.children;var t=e.className,a=e.style,l=e.display,n=void 0===l?"block":l,o=Object(D.a)(e,["children","className","style","display"]),c={block:{display:"block"},inlineBlock:{display:"inline-block"},inline:{display:"inline"}}[n];return r.a.createElement("h1",Object.assign({className:W()(U.a.title,t),style:Object(g.a)(Object(g.a)({},c),a)},o),"\u5e7d\u94a5\u7684\u5c0f\u7834\u7ad9")}a(130);var Q=a(62),K=a(187),V=a.n(K);function X(e){var t=Object(u.f)(),a=v(),l=Object(n.useContext)(I).logout,o=e.direction,c=void 0===o?"horizontal":o,s=e.split,i=void 0===s?"/":s,m=e.size,d=void 0===m?"small":m,_=e.theme,y=void 0===_?"blue":_,p=e.style,f=void 0===p?{}:p,h=e.className,E=void 0===h?"":h,x=O(y).toLowerCase(),w={blue:{default:{color:"#1890ff",fontWeight:"bold"},active:{color:"#3b5f70",fontWeight:"bold"}},write:{default:{color:"#ffffff",fontWeight:"bold"},active:{color:"#3b5f70",fontWeight:"bold"}}},S={string:w[y],object:Object(g.a)(Object(g.a)({},w.blue),y)}[x],j=function(){l((function(){t.push("/home")}))},k=[{name:"\u9996\u9875",to:"/home"},{name:"\u4e2a\u4eba\u4e2d\u5fc3",to:"/user"},{name:"\u8d26\u53f7\u7ba1\u7406",to:"/accounts"},{name:"\u8d26\u672c\u7ba1\u7406",to:"/ledgers"}].concat(a?[{name:"\u9000\u51fa"}]:[{name:"\u767b\u5f55",to:"/login"},{name:"\u6ce8\u518c",to:"/register"}]),C=r.a.createElement("span",{style:S.default},i);return r.a.createElement("div",{className:W()(V.a.link,E),style:f},r.a.createElement(Q.b,{direction:c,split:C,size:d},k.map((function(e){return e.to?r.a.createElement(b.b,{style:S.default,activeStyle:S.active,to:e.to,key:e.name},e.name):r.a.createElement("button",{style:S.default,key:e.name,onClick:j},"\u9000\u51fa")}))))}var J=a(188),Z=a.n(J);function $(){return r.a.createElement("div",{className:Z.a.content},r.a.createElement("span",null,"\u5e7d\u94a5\u7684\u7f51\u7edc\u6280\u672f\u63a2\u7d22"),r.a.createElement("span",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://beian.miit.gov.cn/"},"\u8700ICP\u590718009291\u53f7")))}var ee=a(71),te=a(61),ae=a.n(te),le=a(80),ne=a(36),re=a.n(ne),oe=(a(329),a(194)),ce=a(189),se=a.n(ce);function ie(e){var t=e.children,a=e.className,l=(e.flex,Object(D.a)(e,["children","className","flex"]));return r.a.createElement("div",{className:W()(se.a.customCard,a)},r.a.createElement(oe.a,l,t))}ie.defaultProps={title:null,bordered:!1,bodyStyle:{padding:5}};a(159);var me=a(68),de=a(190),_e=a.n(de);function ue(e){e.children;var t=Object(D.a)(e,["children"]);return r.a.createElement(me.a,Object.assign({className:_e.a.empty,imageStyle:{padding:"24px 24px 0"}},t))}var be=a(191),ye=a.n(be),pe=a(15),fe=a.n(pe),he=r.a.createContext({}),ge={year:"\u5e74",month:"\u6708",all:"\u5168\u90e8"};var Ee=function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),l=a[0],r=a[1],o=Object(n.useState)(null),c=Object(h.a)(o,2),s=c[0],i=c[1],m=(new Date).getFullYear(),d=(new Date).getMonth()+1,_=Object(n.useState)({date:"".concat(m,"-").concat(d<10?"0"+d:d),type:"month"}),u=Object(h.a)(_,2),b=u[0],y=u[1],p=Object(n.useState)(""),g=Object(h.a)(p,2),v=g[0],O=g[1],x=Object(n.useState)(""),w=Object(h.a)(x,2),S=w[0],j=w[1],k=Object(n.useState)(null),C=Object(h.a)(k,2),Y=C[0],B=C[1];Object(n.useEffect)((function(){O(function(e){return ge[e]}(b.type)),j(function(e){var t=e.date,a=e.type,l=t?t.split("-"):[void 0,void 0],n=Object(h.a)(l,2),r=n[0],o=n[1];return{year:"".concat(r,"\u5e74"),month:"".concat(r,"\u5e74").concat(o,"\u6708"),all:"\u5168\u90e8"}[a]}(b)),B(function(e){var t=e.date,a=e.type,l="YYYY-MM-DD HH:mm:ss",n=fe()().format("YYYY-MM");return{year:[fe()(t).format(l),fe()(t).add(1,"years").subtract(1,"seconds").format(l)],month:[fe()(t).format(l),fe()(t).add(1,"months").subtract(1,"seconds").format(l)],all:[fe()(1949).format(l),fe()(n).subtract(1,"seconds").format(l)]}[a]}(b))}),[b]);var A=Object(n.useState)([]),N=Object(h.a)(A,2),L=N[0],I=N[1],M=Object(n.useState)(!1),P=Object(h.a)(M,2),R=P[0],D=P[1],G=Object(n.useCallback)(Object(le.a)(ae.a.mark((function e(){var t,a,l,n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Y||[],a=Object(h.a)(t,2),l=a[0],n=a[1],D(!0),T.detail.findAll({bookId:s,start:l,end:n}).then((function(e){I(e)})).finally((function(){D(!1)}));case 3:case"end":return e.stop()}}),e)}))),[s,Y]);Object(n.useEffect)((function(){s&&Y&&G()}),[G,s,Y]);var W=Object(n.useState)([]),F=Object(h.a)(W,2),z=F[0],q=F[1];function U(){var e=(E()||{}||{}).id;if(!e)return f.b.error("\u9519\u8bef! \u672a\u767b\u5f55\u7528\u6237");var t={userId:e};T.label.findAll(t).then((function(e){q(e)}))}Object(n.useEffect)((function(){U()}),[]);var H=Object(n.useState)(!1),Q=Object(h.a)(H,2),K=Q[0],V=Q[1],X=Object(n.useState)(!1),J=Object(h.a)(X,2),Z=J[0],$=J[1],ee=Object(n.useState)(""),te=Object(h.a)(ee,2),ne=te[0],re=te[1],oe=Object(n.useState)(null),ce=Object(h.a)(oe,2),se=ce[0],ie=ce[1];return{labels:z,setLabels:q,getLabels:U,detailList:L,setDetailList:I,listLoading:R,setListLoading:D,getList:G,books:l,setBooks:r,selectedBookId:s,setSelectedBookId:i,type:v,setType:O,current:b,setCurrent:y,dateText:S,setDateText:j,time:Y,batchRecordVisible:K,setBatchRecordVisible:V,recordVisible:Z,setRecordVisible:$,editType:ne,setEditType:re,record:se,setRecord:ie,editRecordHandle:function(e){$(!Z),re("edit"),ie(e)},addRecordHandle:function(e){$(!Z),re("add"),ie(null)},cancelRecordHandle:function(){$(!Z),re(""),ie(null)}}};function ve(e){var t=Object(n.useContext)(he),a=t.books,l=t.setBooks,o=t.selectedBookId,c=t.setSelectedBookId,s=Object(n.useState)({expend:0,income:0}),i=Object(h.a)(s,2),m=i[0],d=i[1],_=Object(n.useCallback)(Object(le.a)(ae.a.mark((function e(){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T.book.findAll().then((function(e){var t=e.reduce((function(e,t){return e.expend+=t.expend,e.income+=t.income,e}),m);d(t),l(e),c(e[0]?e[0].id:null)}));case 1:case"end":return e.stop()}}),e)}))),[m,d,l,c]);return Object(n.useEffect)((function(){_()}),[_]),r.a.createElement("div",{className:re.a.wrapper},r.a.createElement("div",{className:re.a.statisticsBox},r.a.createElement("div",{className:re.a.statisticsTotal},r.a.createElement("p",null,"\u7d2f\u8ba1\u6536\u5165"),r.a.createElement("p",null,m.income.toFixed(2))),r.a.createElement("div",{className:re.a.statisticsTotal},r.a.createElement("p",null,"\u7d2f\u8ba1\u652f\u51fa"),r.a.createElement("p",null,m.expend.toFixed(2)))),r.a.createElement("div",{className:re.a.list},r.a.createElement(ie,{title:"\u4e2a\u4eba\u8d26\u672c",className:re.a.sectionContainer,loading:!1},r.a.createElement("div",{className:W()(re.a.bookList,re.a.scrollYBar)},a&&a.length?a.map((function(e){return r.a.createElement("div",{key:e.id,className:W()(re.a.bookItem,Object(ee.a)({},re.a.avtive,o===e.id)),onClick:function(){c(e.id)}},r.a.createElement("div",{className:re.a.cover},r.a.createElement("div",{className:re.a.bookLabel},r.a.createElement("img",{src:ye.a,alt:""})),r.a.createElement("div",{className:re.a.bookName},e.name),r.a.createElement("div",{className:re.a.edit})),r.a.createElement("div",{className:re.a.bookInfo},r.a.createElement("p",null,"\u6536\u5165: ",e.income.toFixed(2)),r.a.createElement("p",null,"\u652f\u51fa: ",e.expend.toFixed(3))))})):r.a.createElement(ue,null)))))}ve.defaultProps={};a(137);var Oe=a(83),xe=(a(239),a(197)),we=(a(75),a(30)),Se=a(117),je=a(124),ke=a(334),Ce=a(335),Ye=a(28),Be=a.n(Ye),Ae={"\u9910\u996e":"icon-canyin","\u4ea4\u901a":"icon-jiaotong","\u4f4f\u623f":"icon-housing","\u7f8e\u5bb9":"icon-meirong","\u670d\u9970":"icon-clothes","\u8fd0\u52a8":"icon-yundong","\u65c5\u884c":"icon-lvxing","\u5a31\u4e50":"icon-fun","\u751f\u6d3b":"icon-shenghuo","\u533b\u7597":"icon-yiliao","\u901a\u8baf":"icon-tongxun","\u5b66\u4e60":"icon-xuexi","\u793c\u7269":"icon-liwu","\u6bcd\u5a74":"icon-muying","\u6570\u7801":"icon-shuma","\u96f6\u98df":"icon-naicha","\u8d2d\u7269":"icon-gouwu","\u6c34\u679c":"icon-shuiguo","\u5176\u4ed6":"icon-qita",default:"icon-qita","\u5de5\u8d44":"icon-gongzi","\u6279\u91cf\u6dfb\u52a0":"icon-piliangtianjia","\u7f16\u8f91":"icon-bianji","\u65b0\u589e":"icon-new01"};function Ne(e){var t=Ae[e.name]||Ae.default;return r.a.createElement("svg",{className:"icon","aria-hidden":"true"},r.a.createElement("use",{xlinkHref:"#".concat(t)}))}a(160);var Le=a(116),Te=(a(161),a(85)),Ie=(a(243),a(195)),Me=(a(245),a(126)),Pe=(a(177),a(40)),Re=a(141),De=a.n(Re);function Ge(e){var t=Object(n.useContext)(he),a=t.labels,l=t.selectedBookId,o=t.getList,c=t.recordVisible,s=t.record,i=t.editType,m=t.cancelRecordHandle,d=Pe.a.useForm(),_=Object(h.a)(d,1)[0],u=Object(n.useState)(!1),b=Object(h.a)(u,2),y=b[0],p=b[1],E=Object(n.useState)(""),v=Object(h.a)(E,2),O=v[0],x=v[1];function w(e){return T.detail.updateOne(e).then((function(e){f.b.success("\u7f16\u8f91\u6210\u529f"),j()})).finally((function(){p(!1),o()}))}function S(e){return T.detail.addOne(e).then((function(e){f.b.success("\u6dfb\u52a0\u6210\u529f"),j()})).finally((function(){p(!1),o()}))}function j(){x(""),_.resetFields(),m()}return Object(n.useEffect)((function(){if(c&&i&&a.length){var e=a.length?a[0].id:null,t={add:{date:fe()(),type:"0",labelId:e},edit:{date:fe()((s||{}).date),type:(s||{}).type,labelId:(s||{}).labelId,amount:(s||{}).amount,remark:(s||{}).remark}}[i];x(t.labelId),_.setFieldsValue(t)}}),[c,i,s,a,_]),r.a.createElement(Le.a,{title:"add"===i?"\u65b0\u589e":"\u7f16\u8f91",placement:"bottom",closable:!1,onClose:j,visible:c,getContainer:!1,style:{position:"absolute"},height:"auto",bodyStyle:{padding:"8px 20px"},headerStyle:{padding:"8px 20px"}},r.a.createElement(Pe.a,{form:_,onFinish:function(e){var t=Object(g.a)(Object(g.a)({},e),{},{date:e.date.format("YYYY-MM-DD"),bookId:l,id:(s||{}).id});p(!0),(0,{edit:w,add:S}[i])(t)},labelAlign:"right",labelCol:{span:5},wrapperCol:{span:18}},r.a.createElement(Pe.a.Item,{label:"\u6240\u6709\u5206\u7c7b",name:"labelId",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5206\u7c7b"}],labelCol:{span:6},wrapperCol:{span:24},style:{flexDirection:"column"}},r.a.createElement("ul",{className:De.a.labelList},a.map((function(e){return r.a.createElement("li",{className:W()(e.id===O?De.a.active:""),key:e.id,onClick:function(){return t=e.id,x(t),void _.setFieldsValue({labelId:t});var t}},r.a.createElement("i",null,r.a.createElement(Ne,{name:e.label})),r.a.createElement("p",null,e.label))})))),r.a.createElement(Pe.a.Item,{label:"\u7c7b\u578b",name:"type",rules:[{required:!0}]},r.a.createElement(Me.a.Group,null,r.a.createElement(Me.a,{value:"0"},"\u652f\u51fa"),r.a.createElement(Me.a,{value:"1"},"\u6536\u5165"))),r.a.createElement(Pe.a.Item,{label:"\u65e5\u671f",name:"date",rules:[{required:!0}]},r.a.createElement(Oe.a,{placeholder:"\u8bf7\u9009\u62e9",style:{width:140},format:"YYYY-MM-DD"})),r.a.createElement(Pe.a.Item,{label:"\u91d1\u989d",name:"amount",rules:[{required:!0}]},r.a.createElement(Ie.a,{placeholder:"\u8bf7\u8f93\u5165",style:{width:140},min:0,max:1e6})),r.a.createElement(Pe.a.Item,{label:"\u5907\u6ce8",name:"remark"},r.a.createElement(Te.a.TextArea,{placeholder:"\u8bf7\u8f93\u5165",autoSize:{minRows:2,maxRows:3}})),r.a.createElement(Pe.a.Item,{style:{textAlign:"center"},wrapperCol:{span:24}},r.a.createElement(Q.b,{size:8},r.a.createElement(we.a,{type:"primary",htmlType:"submit",style:{width:120},loading:y,disabled:y},"\u786e\u5b9a"),r.a.createElement(we.a,{style:{width:120},disabled:y,onClick:j},"\u53d6\u6d88")))))}Ge.defaultProps={};var We=["\u661f\u671f\u5929","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"];function Fe(e){var t=e.name,a=e.onClick;return r.a.createElement("button",{className:Be.a.oper,title:t,onClick:a},r.a.createElement(Ne,{name:t}))}function ze(e){var t=Object(n.useContext)(he),a=t.detailList,l=t.type,o=t.setCurrent,c=t.dateText,s=t.listLoading,i=t.editRecordHandle,m=t.addRecordHandle,d=t.batchRecordVisible,_=t.setBatchRecordVisible,u=Object(n.useState)(!1),b=Object(h.a)(u,2),y=b[0],p=b[1],f=Object(n.useState)(l),E=Object(h.a)(f,2),v=E[0],O=E[1],x=Object(n.useState)(!1),w=Object(h.a)(x,2),S=w[0],j=w[1],k=function(e){O(e),p(!0)},C=a.reduce((function(e,t){var a=t.date,l=fe()(a).format("YYYY-MM-DD"),n=Object(g.a)(Object(g.a)({},t),{},{date:l});return e[l]?e[l]=[].concat(Object(Se.a)(e[l]),[n]):e[l]=[n],e}),{}),Y=Object.keys(C).map((function(e){var t=C[e],a=t.reduce((function(e,t){switch(t.type){case"0":e.expend+=t.amount;break;case"1":e.income+=t.amount}return e}),{date:e,expend:0,income:0});return Object(g.a)(Object(g.a)({},a),{},{list:t})}));return r.a.createElement("div",{className:Be.a.wrapper},r.a.createElement("div",{className:Be.a.container},r.a.createElement(ie,{title:"\u6536\u652f\u8be6\u60c5",className:Be.a.sectionContainer,extra:r.a.createElement("div",{className:Be.a.extra},r.a.createElement(xe.a,{trigger:"click",placement:"bottomRight",overlayStyle:{padding:0},overlay:r.a.createElement("ul",{style:{background:"#eee"}},r.a.createElement("div",null,r.a.createElement(we.a,{type:"text",style:{width:"100%"},onClick:function(){k("year")}},"\u6309\u5e74")),r.a.createElement("div",null,r.a.createElement(we.a,{type:"text",style:{width:"100%"},onClick:function(){k("month")}},"\u6309\u6708")),r.a.createElement("div",null,r.a.createElement(we.a,{type:"text",style:{width:"100%"},onClick:function(){k("")}},"\u5168\u90e8")))},r.a.createElement("span",{className:Be.a.topText},c,r.a.createElement(je.a,null))),r.a.createElement("div",{className:W()(Be.a.date,Object(ee.a)({},Be.a.active,y))},r.a.createElement(Oe.a,{value:null,style:{width:280},onChange:function(e,t){o({date:t,type:v}),p(!1)},picker:v,open:y})),r.a.createElement("div",{className:W()(Be.a.menuContent,Object(ee.a)({},Be.a.active,y)),onClick:function(){return p(!1)}})),loading:s},r.a.createElement("div",{className:W()(Be.a.scrollYBar),style:{flex:1}},Y&&Y.length?Y.map((function(e,t){var a=e.date,l=e.expend,n=e.income,o=e.list;return r.a.createElement("div",{className:Be.a.itemBox,key:t},r.a.createElement("div",{className:W()(Be.a.spaceBetween,Be.a.itemTitle)},r.a.createElement("div",null,fe()(a).format("M\u6708D\u65e5")," ",We[fe()(a).format("e")]),r.a.createElement("div",{className:W()(Be.a.total)},r.a.createElement("span",null,"\u652f\u51fa: ",l),r.a.createElement("span",null,"\u6536\u5165: ",n))),r.a.createElement("ul",{className:Be.a.content},o.map((function(e,t){var l=e.label,n=e.remark,o=e.type,c=e.amount;return r.a.createElement("li",{className:Be.a.spaceBetween,key:a+"-"+t},r.a.createElement("span",null,r.a.createElement(Ne,{name:l})),r.a.createElement("span",null,r.a.createElement("span",null,l),r.a.createElement("br",null),r.a.createElement("p",null,n)),r.a.createElement("span",{className:{0:Be.a.expand,1:Be.a.income}[o]},{0:"-",1:"+"}[o],c),r.a.createElement("span",{style:{display:S?"inline-block":"none"}},r.a.createElement(we.a,{type:"text",title:"\u7f16\u8f91",icon:r.a.createElement(ke.a,{style:{color:"#3f51b5"}}),onClick:function(){return i(e)}}),r.a.createElement(we.a,{type:"text",title:"\u5220\u9664",icon:r.a.createElement(Ce.a,{style:{color:"#e91e63"}}),onClick:function(){}})))}))))})):r.a.createElement(ue,null)),r.a.createElement("div",{className:Be.a.operation},r.a.createElement("div",null),r.a.createElement("div",{className:Be.a.icon},r.a.createElement(Fe,{name:"\u7f16\u8f91",onClick:function(){_(!d)}}),r.a.createElement(Fe,{name:"\u7f16\u8f91",onClick:function(){j(!S)}}),r.a.createElement(Fe,{name:"\u65b0\u589e",onClick:m}))))),r.a.createElement("div",{className:Be.a.editPlane},r.a.createElement(Ge,null)))}ze.defaultProps={};var qe=a(115),Ue=a(196);qe.registerTheme("default",{color:["#00BAFF","#1DDB69","#F5C149","#FF5A00","#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],backgroundColor:"rgba(0, 0, 0, 0)",textStyle:{},title:{textStyle:{color:"#333"},subtextStyle:{color:"#aaa"}},line:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:4,symbol:"emptyCircle",smooth:!1},radar:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:4,symbol:"emptyCircle",smooth:!1},bar:{barMaxWidth:22,itemStyle:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{itemStyle:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},scatter:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},boxplot:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},parallel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},sankey:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},candlestick:{itemStyle:{normal:{color:"#c23531",color0:"#314656",borderColor:"#c23531",borderColor0:"#314656",borderWidth:1}}},graph:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"}},lineStyle:{normal:{width:1,color:"#aaa"}},symbolSize:4,symbol:"emptyCircle",smooth:!1,color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],label:{normal:{textStyle:{color:"#eee"}}}},map:{itemStyle:{areaColor:"#C2E2F8",borderColor:"#fff",borderWidth:1},label:{show:!1,textStyle:{color:"#000"}},emphasis:{itemStyle:{areaColor:"#79B4DB",borderColor:"#fff",borderWidth:1},label:{show:!1,textStyle:{color:"rgb(100,0,0)"}}}},geo:{itemStyle:{areaColor:"#C2E2F8",borderColor:"#fff",borderWidth:1},label:{show:!1,textStyle:{color:"#000"}},emphasis:{itemStyle:{areaColor:"#79B4DB",borderColor:"#fff",borderWidth:1},label:{show:!1,textStyle:{color:"rgb(100,0,0)"}}}},categoryAxis:{nameTextStyle:{color:"#8C9294"},axisLine:{show:!0,lineStyle:{color:"#DBE8EC"}},axisTick:{show:!1,lineStyle:{color:"#DBE8EC"}},axisLabel:{show:!0,textStyle:{color:"#8C9294"}},splitLine:{show:!1,lineStyle:{color:["#DBE8EC"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{nameTextStyle:{color:"#8C9294"},axisLine:{show:!1,lineStyle:{color:"#DBE8EC"}},axisTick:{show:!1,lineStyle:{color:"#DBE8EC"}},axisLabel:{show:!0,textStyle:{color:"#8C9294"}},splitLine:{show:!0,lineStyle:{color:["#DBE8EC"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999"},emphasis:{borderColor:"#666"}}},legend:{textStyle:{color:"#333"}},tooltip:{padding:0,backgroundColor:"#fff",textStyle:{color:"#333"},borderColor:"rgba(0,0,0,0.05)",borderWidth:1,axisPointer:{lineStyle:{color:"rgba(64,125,230,0.2)",width:1},crossStyle:{color:"#ccc",width:1}}},timeline:{lineStyle:{color:"#293c55",width:1},itemStyle:{normal:{color:"#293c55",borderWidth:1},emphasis:{color:"#a9334c"}},controlStyle:{normal:{color:"#293c55",borderColor:"#293c55",borderWidth:.5},emphasis:{color:"#293c55",borderColor:"#293c55",borderWidth:.5}},checkpointStyle:{color:"#e43c59",borderColor:"rgba(194,53,49, 0.5)"},label:{normal:{textStyle:{color:"#293c55"}},emphasis:{textStyle:{color:"#293c55"}}}},visualMap:{color:["#bf444c","#d88273","#f6efa6"]},dataZoom:{backgroundColor:"rgba(47,69,84,0)",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"rgba(167,183,204,0.4)",handleColor:"#a7b7cc",handleSize:"100%",textStyle:{color:"#333"}},markPoint:{label:{normal:{textStyle:{color:"#eee"}},emphasis:{textStyle:{color:"#eee"}}}}});var He=Object(n.forwardRef)((function(e,t){var a=e.style,l=void 0===a?{width:"100%",height:"100%"}:a;return r.a.createElement(Ue.a,Object.assign({ref:t,theme:"default"},e,{style:l}))})),Qe=function(e){var t=Object(n.useContext)(he),a=t.time,l=t.type,o=t.dateText,c=t.detailList,s=Object(n.useState)([]),i=Object(h.a)(s,2),m=i[0],d=i[1],_={title:{text:o,subtext:"\u65e5\u652f\u51fa\u8be6\u60c5"},grid:{left:"3%",right:"4%",bottom:"40",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},tooltip:{trigger:"axis",padding:5,formatter:function(e){var t=Object(h.a)(e,1)[0];return'\n\t\t\t\t\t<p style="display:flex;justify-content: space-between;"><span>'.concat(t.marker,"\u65e5\u671f\uff1a</span><span>").concat(t.value[0],'</span></p>\n\t\t\t\t\t<p style="display:flex;justify-content: space-between;"><span>').concat(t.marker).concat(t.seriesName,"\uff1a</span><span>").concat(t.value[1]," \xa5</span></p>\n\t\t\t\t")}},xAxis:{type:"time",boundaryGap:!1,splitLine:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"]},dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100,backgroundColor:"rgba(255,255,255,0)",labelFormatter:function(e){return fe()(e).format("YYYY-MM-DD")},brushSelect:!1}],series:[{name:"\u652f\u51fa\u91d1\u989d",data:m,type:"line",itemStyle:{color:"#E91E63"},lineStyle:{color:"#E91E63"}}]};return Object(n.useEffect)((function(){for(var e=c.reduce((function(e,t){var a=t.date,l=fe()(a).format("YYYY-MM-DD"),n=Object(g.a)(Object(g.a)({},t),{},{date:l});return e[l]?e[l]=[].concat(Object(Se.a)(e[l]),[n]):e[l]=[n],e}),{}),t=Object.keys(e).reduce((function(t,a){var l=e[a].reduce((function(e,t){return"0"===t.type&&(e+=t.amount),e}),0);return t[a]=l,t}),e),a=Object.keys(e),l=a[a.length-1],n=a[0],r=fe()(fe()(l).format("YYYY-MM")).format("YYYY-MM-DD"),o=fe()(fe()(n).format("YYYY-MM")).add(1,"months").subtract(1,"seconds").format("YYYY-MM-DD"),s=fe()(r),i=fe()(o),m=[];i>s||s.format("M")===i.format("M");){var _=s.format("YYYY-MM-DD");m.push([_,t[_]?t[_]:0]),s.add(1,"days")}d(m)}),[c,a]),r.a.createElement(ie,{title:"".concat(l,"\u652f\u51fa\u8be6\u60c5")},r.a.createElement(He,{option:_,style:{height:250}}))};Qe.defaultProps={};var Ke=Qe,Ve=function(e){var t=Object(n.useContext)(he),a=t.time,l=t.dateText,o=t.type,c=t.detailList,s=t.labels,i=Object(n.useState)([]),m=Object(h.a)(i,2),d=m[0],_=m[1],u=Object(n.useState)([]),b=Object(h.a)(u,2),y=b[0],p=b[1],f={title:{text:l,subtext:"\u652f\u51fa\u7c7b\u578b\u6392\u884c"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},padding:5},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:y,inverse:!0},series:[{name:"\u652f\u51fa\u91d1\u989d",type:"bar",data:d,itemStyle:{color:"#b8d2c7"}}]};return Object(n.useEffect)((function(){var e=[],t=[],a=c.reduce((function(e,t){var a=t.label,l=t.amount;return"0"!==t.type||(e[a]?e[a]+=100*l:e[a]=100*l),e}),{});Object.keys(a).map((function(e){return{name:e,value:a[e]/100}})).sort((function(e,t){return t.value-e.value})).forEach((function(a){e[e.length]=a.name,t[t.length]=a.value})),p(e.length?e:s.slice(0,10).map((function(e){return e.label}))),_(t)}),[c,a,s]),r.a.createElement(ie,{title:"".concat(o,"\u652f\u51fa\u7c7b\u578b\u6392\u884c")},y&&y.length?r.a.createElement(He,{option:f,style:{height:250}}):r.a.createElement(ue,{style:{height:250}}))};Ve.defaultProps={};var Xe=Ve,Je=function(){var e=Object(n.useContext)(he),t=e.time,a=e.dateText,l=e.type,o=e.detailList,c=Object(n.useState)([]),s=Object(h.a)(c,2),i=s[0],m=s[1],d={title:{text:a,subtext:"\u652f\u51fa\u7c7b\u578b\u5206\u5e03"},tooltip:{trigger:"item",padding:5},legend:{top:"bottom",left:"center",padding:5,itemGap:10,itemWidth:12,itemHeight:14},series:[{name:"\u652f\u51fa\u91d1\u989d",type:"pie",radius:["25%","40%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:0,borderColor:"#fff",borderWidth:1},data:i}]};return Object(n.useEffect)((function(){var e=o.reduce((function(e,t){var a=t.label,l=t.amount;return"0"!==t.type||(e[a]?e[a]+=100*l:e[a]=100*l),e}),{}),t=Object.keys(e).map((function(t){return{name:t,value:e[t]/100}})).sort((function(e,t){return t.value-e.value}));m(t)}),[o,t]),r.a.createElement(ie,{title:"".concat(l,"\u652f\u51fa\u7c7b\u578b\u5206\u5e03")},i&&i.length?r.a.createElement(He,{option:d,style:{height:250}}):r.a.createElement(ue,{style:{height:250}}))};Je.defaultProps={};var Ze=Je,$e=function(e){var t=Object(n.useContext)(he),a=t.time,l=t.dateText,o=t.type,c=t.detailList,s=Object(n.useState)([]),i=Object(h.a)(s,2),m=i[0],d=i[1],_=Object(n.useState)([]),u=Object(h.a)(_,2),b=u[0],y=u[1],p=Object(n.useState)([]),f=Object(h.a)(p,2),g=f[0],E=f[1],v=Object(n.useState)([]),O=Object(h.a)(v,2),x=O[0],w=O[1];Object(n.useEffect)((function(){if(a){var e=c.reduce((function(e,t){var a=t.date,l=t.type,n=t.amount,r=fe()(a).format("YYYY-MM"),o=e[r];switch("undefined"===typeof o&&(o={name:r,date:r,expend:0,income:0}),l){case"0":o.expend+=n;break;case"1":o.income+=n}return e[r]=o,e}),{}),t=Object.keys(e).map((function(t){return e[t]})).sort((function(e,t){return Date.parse(e.date)-Date.parse(t.date)})),l=Object(h.a)(a,2),n=l[0],r=l[1],s=fe()(r),i=fe()(n);if("\u5e74"===o||"\u6708"===o){var m=fe()(n).format("YYYY");i=fe()(fe()(m).format("YYYY-MM")),s=fe()(fe()(m).add(1,"y").subtract(1,"months").format("YYYY-MM"))}"\u81f3\u4eca"===o&&(i=fe()(t[0].date),i=fe()(i).add(12,"months")>s?fe()(s).subtract(11,"months"):i);for(var _=[];s>i||i.format("M")===s.format("M");){var u=i.format("YYYY-MM");_.push(e[u]?e[u]:{name:u,date:u,expend:0,income:0}),i.add(1,"months")}var b=[],p=[],f=[],g=[];_.forEach((function(e){b.push(e.date),p.push(e.expend),f.push(e.income),g.push(e.income-e.expend)})),d(b),y(p),E(f),w(g)}}),[c,a,o]);var S={title:{text:l,subtext:"\u6536\u5165\u652f\u51fa\u8be6\u60c5"},grid:{left:"3%",right:"4%",bottom:"45",containLabel:!0},legend:{data:["\u6536\u5165","\u652f\u51fa","\u7ed3\u4f59"],left:"150"},tooltip:{padding:5,formatter:function(e){return"".concat(e.name,"<br />").concat(e.marker,"&nbsp;").concat(e.seriesName,"&nbsp;&nbsp;&nbsp;").concat(e.value," \xa5")}},xAxis:{data:m,axisLine:{onZero:!0},splitLine:{show:!1},splitArea:{show:!1}},yAxis:{name:""},toolbox:{feature:{magicType:{type:["line","bar","stack","tiled"],title:{line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",stack:"\u5806\u53e0",tiled:"\u5e73\u94fa"}}}},dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100,backgroundColor:"rgba(255,255,255,0)",dataBackground:{areaStyle:{color:"red"}},labelFormatter:function(e){return fe()(e).format("YYYY-MM")},brushSelect:!1}],series:[{name:"\u652f\u51fa",type:"bar",stack:"one",emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0,0,0,0.3)"}},data:b,itemStyle:{color:"#E91E63"},barMinHeight:1},{name:"\u6536\u5165",type:"bar",stack:"two",data:g,itemStyle:{color:"#001852"},barMinHeight:1},{name:"\u7ed3\u4f59",type:"line",data:x,itemStyle:{color:"#6699ff"}}]};return r.a.createElement(ie,{title:"".concat(o,"\u6536\u5165\u652f\u51fa\u7edf\u8ba1")},m&&m.length?r.a.createElement(He,{option:S,style:{height:250}}):r.a.createElement(ue,{style:{height:250}}))};$e.defaultProps={};var et=$e,tt=(a(321),a(70)),at=(a(323),a(336)),lt=a(198),nt=a(69),rt=a.n(nt),ot={type:"\u7c7b\u578b",date:"\u65e5\u671f",amount:"\u91d1\u989d",labelId:"\u6807\u7b7e",remark:"\u5907\u6ce8"},ct={type:[{required:!0,message:"\u7c7b\u578b\u4e0d\u53ef\u4e3a\u7a7a"},{pattern:/[01]/,message:"\u7c7b\u578b\u53c2\u6570\u9519\u8bef"}],date:[{required:!0,message:"\u65e5\u671f\u4e0d\u53ef\u4e3a\u7a7a"}],amount:[{required:!0,message:"\u91d1\u989d\u4e0d\u53ef\u4e3a\u7a7a"}],labelId:[{required:!0,message:"\u6807\u7b7e\u4e0d\u53ef\u4e3a\u7a7a"}],remark:[{required:!1,message:""}]},st={type:"0",date:fe()(),amount:"",labelId:"",remark:""},it={minHight:36,borderRadius:3},mt=null;function dt(e){var t=Object(n.useContext)(he),a=t.books,l=t.selectedBookId,o=t.batchRecordVisible,c=t.setBatchRecordVisible,s=Object(n.useState)(l),i=Object(h.a)(s,2),m=i[0],d=i[1],_=Object(n.useState)(!1),u=Object(h.a)(_,2),b=u[0],y=u[1],p=Object(n.useState)([]),v=Object(h.a)(p,2),O=v[0],x=v[1],w=Object(n.useState)([]),S=Object(h.a)(w,2),j=S[0],k=S[1],C=[{field:"type",style:Object(g.a)(Object(g.a)({},it),{},{width:80}),render:function(e){var t=e.key,a=e.style;return r.a.createElement(tt.a,{placeholder:ot[t],style:a},r.a.createElement(tt.a.Option,{value:"0"},"\u652f\u51fa"),r.a.createElement(tt.a.Option,{value:"1"},"\u6536\u5165"))}},{field:"date",style:Object(g.a)(Object(g.a)({},it),{},{width:120}),initialValues:fe()(),render:function(e){var t=e.key,a=e.style;return r.a.createElement(Oe.a,{placeholder:ot[t],style:a,format:"YYYY-MM-DD"})}},{field:"amount",style:Object(g.a)(Object(g.a)({},it),{},{width:80}),render:function(e){var t=e.key,a=e.style;return r.a.createElement(Te.a,{placeholder:ot[t],style:a})}},{field:"labelId",style:Object(g.a)(Object(g.a)({},it),{},{width:80}),render:function(e){var t=e.style;return r.a.createElement(tt.a,{placeholder:"\u8bf7\u9009\u62e9",style:t,showSearch:!0,optionFilterProp:"children"},O.map((function(e){return r.a.createElement(tt.a.Option,{key:e.id,value:e.id,title:e.label},e.label)})))}},{field:"remark",style:Object(g.a)(Object(g.a)({},it),{},{width:160}),render:function(e){var t=e.key,a=e.style;return r.a.createElement(Te.a,{placeholder:ot[t],style:a})}}];return Object(n.useEffect)((function(){if(o){var e=localStorage.getItem("LedgersAddList"),t=e?JSON.parse(e).map((function(e){return e.date=fe()(e.date?e.date:void 0),e})):[];k(t),d(l),function(){var e=(E()||{}||{}).id;if(!e)return f.b.error("\u9519\u8bef! \u672a\u767b\u5f55\u7528\u6237");var t={userId:e};T.label.findAll(t).then((function(e){x(e)}))}()}}),[o]),r.a.createElement(Le.a,{title:"\u6dfb\u52a0\u6570\u636e",placement:"left",closable:!1,onClose:function(){return c(!1)},visible:o,bodyStyle:{padding:12},width:"50%"},r.a.createElement("div",{className:rt.a.container},r.a.createElement("div",null,r.a.createElement(Q.b,null,"\u8d26\u672c:",r.a.createElement(tt.a,{value:m,style:{width:120},onChange:function(e){d(e)}},a.map((function(e){var t=e.id,a=e.name;return r.a.createElement(tt.a.Option,{key:t,value:t},a)}))))),r.a.createElement("div",{className:rt.a.table},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:rt.a.header},r.a.createElement(Q.b,{className:rt.a.space,align:"baseline",size:8},C.map((function(e,t){var a=e.field,l=e.style;return r.a.createElement("span",{key:t,value:ot[a],style:Object(g.a)({},l),className:rt.a.th},ot[a])}))))),r.a.createElement(Pe.a,{name:"dynamic_form_nest_item",onFinish:function(e){if(!(E()||{}||{}).id)return f.b.error("\u9519\u8bef! \u672a\u767b\u5f55\u7528\u6237");var t=e.formList.map((function(e){return e.date=fe()(e.date).format("YYYY-MM-DD"),e.bookId=m,e}));y(!0),T.detail.addMultiple(t).then((function(e){e&&(f.b.success("\u6279\u91cf\u6dfb\u52a0\u6210\u529f!"),localStorage.removeItem("LedgersAddList"),k([]))})).finally((function(){y(!1)}))},onValuesChange:function(e,t){clearTimeout(mt),mt=setTimeout((function(){k(t),localStorage.setItem("LedgersAddList",JSON.stringify(t.formList))}),500)},autoComplete:"off"},r.a.createElement(Pe.a.List,{name:"formList",initialValue:j},(function(e,t,a){var l=t.add,n=t.remove;t.move;return r.a.createElement(r.a.Fragment,null,e.map((function(e,t){var a=e.key,l=e.name,o=e.fieldKey,c=Object(D.a)(e,["key","name","fieldKey"]);return r.a.createElement(Q.b,{key:a,className:rt.a.space,align:"baseline",size:8},C.map((function(e){var a=e.field,n=e.render,s=e.style;return r.a.createElement(Pe.a.Item,Object.assign({},c,{key:t+""+a,name:[l,a],fieldKey:[o,a],rules:ct[a],className:rt.a.formItem}),n?n({key:a,style:s,record:j[t],index:t}):r.a.createElement(Te.a,{placeholder:ot[a],style:s||it}))})),r.a.createElement("span",{style:{padding:6}},r.a.createElement(at.a,{onClick:function(){return n(l)}})))})),r.a.createElement(Pe.a.Item,null,r.a.createElement(we.a,{type:"dashed",onClick:function(){return l(st)},block:!0,icon:r.a.createElement(lt.a,null),style:it},"\u65b0\u589e\u4e00\u6761")))})),r.a.createElement(Pe.a.Item,{style:{textAlign:"center"}},r.a.createElement(Q.b,{size:8},r.a.createElement(we.a,{type:"primary",htmlType:"submit",style:{width:150},loading:b,disabled:b},"\u786e\u5b9a"),r.a.createElement(we.a,{style:{width:150},disabled:b,onClick:function(){return c(!o)}},"\u53d6\u6d88")))))))}var _t=function(e){var t=e.children,a=Object(D.a)(e,["children"]);return r.a.createElement("div",Object.assign({className:W()(z.a.space,z.a.scrollYBar)},a),t)},ut=[{path:"/",name:"\u8d26\u6237\u7ba1\u7406\u9875",component:function(){var e=Ee(),t=Object(n.useRef)(),a=Object(n.useRef)();return Object(n.useEffect)((function(){var e=t.current,l=a.current;l&&(l.style.height=document.body.offsetHeight-e.offsetHeight+"px",window.onresize=function(){l.style.height=document.body.offsetHeight-e.offsetHeight+"px"})})),r.a.createElement(he.Provider,{value:e},r.a.createElement("div",{className:z.a.wrapper},r.a.createElement("div",{ref:t,className:z.a.header},r.a.createElement("div",{className:z.a.spaceBetween},r.a.createElement("div",null,r.a.createElement(H,{className:z.a.title})),r.a.createElement("div",{className:z.a.extra},r.a.createElement(X,{theme:"write"})))),r.a.createElement("div",{ref:a,className:z.a.content},r.a.createElement(_t,null,r.a.createElement(ve,null)),r.a.createElement(_t,null,r.a.createElement(ze,null)),r.a.createElement(_t,{style:{flex:1}},r.a.createElement(Ke,null),r.a.createElement(P.a,null,r.a.createElement(R.a,{span:14},r.a.createElement(Xe,null)),r.a.createElement(R.a,{span:10},r.a.createElement(Ze,null))),r.a.createElement(et,null)),r.a.createElement(dt,null)),r.a.createElement("div",{className:z.a.footer},r.a.createElement($,null))))},exact:!0}],bt=function(e){var t=window.localStorage.getItem("token"),a=Object(n.useState)(!!t),l=Object(h.a)(a,2),o=l[0],c=l[1],s=function(){var e=Object(le.a)(ae.a.mark((function e(){var t,a,l,n,r,o,s,i,m,d,_,u,b;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.location.search.split("?"),a=Object(h.a)(t,2),l=a[1],n=l?l.split("&"):[],r=n.reduce((function(e,t){var a=t.split("="),l=Object(h.a)(a,2),n=l[0],r=l[1];return e[n]=r,e}),{}),o=r.ssoToken,s=Object(D.a)(r,["ssoToken"]),i=Object.keys(s).reduce((function(e,t,a,l){return e+("".concat(t,"=").concat(s[t])+(a>=l.length-1?"":"&"))}),""),m="".concat(window.location.origin).concat(i&&"?"+i),o){e.next=11;break}return window.localStorage.removeItem("token"),window.localStorage.removeItem("user"),window.location.href="".concat(k.serverUrl||"","/login?serviceURL=").concat(m),e.abrupt("return");case 11:return e.prev=11,e.next=14,T.sso.doLogin({ssoToken:o,serviceURL:m});case 14:d=e.sent,_=d.token,u=d.user,b=d.redirectURL,window.localStorage.setItem("token",_),window.localStorage.setItem("user",JSON.stringify(u)),b&&(window.location.href=b),c(!0),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(11),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[11,22]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){t||s()}),[t]),o?e.children:r.a.createElement("div",null,"loading...")};function yt(){return ut.map((function(e){return r.a.createElement(u.a,{key:e.path,exact:e.exact,path:e.path,component:e.component})}))}var pt,ft=function(){return r.a.createElement(I.Provider,{value:M()},r.a.createElement(_.a,{locale:p.a},r.a.createElement(bt,null,r.a.createElement(b.a,null,r.a.createElement(u.c,null,r.a.createElement(yt,null))))))},ht=Object(s.a)(pt||(pt=Object(l.a)(["\n  ","\n  ","\n  /* other styles */\n"])),i.a,d.a);c.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(ht,null),r.a.createElement(ft,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},36:function(e,t,a){e.exports={button:"style_button__1gIbW",draw:"style_draw__3wWrM",meet:"style_meet__2DLlM",center:"style_center__3Z-Vm",circle:"style_circle__PeIcw",ghost:"style_ghost__XRve9",noGhost:"style_noGhost__3Yte_",large:"style_large__2Y7mX",normal:"style_normal__xrHGa",small:"style_small__3422D",bg:"style_bg__1O_aJ",formContent:"style_formContent__MdD6x",inputStyle:"style_inputStyle__VkSN8",spaceBetween:"style_spaceBetween__aaFNy",title:"style_title__9lltn",extra:"style_extra__du8AD",search:"style_search__1BS7b",label:"style_label__8jmfN",scrollYBar:"style_scrollYBar__32eCk",wrapper:"style_wrapper__2jCKu",statisticsBox:"style_statisticsBox__3sxFo",statisticsTotal:"style_statisticsTotal__2_yMX",list:"style_list__1M8YR",sectionContainer:"style_sectionContainer__1S4v6",bookList:"style_bookList__3tCeQ",bookItem:"style_bookItem__2QysK",cover:"style_cover__2B6rv",bookName:"style_bookName__2SehJ",bookLabel:"style_bookLabel__1k3N5",bookInfo:"style_bookInfo__1HVyp",avtive:"style_avtive__rnjpA",operation:"style_operation__3Y_Ku",icon:"style_icon__13X1x",addIcon:"style_addIcon__1EAhf"}},55:function(e,t,a){e.exports={button:"style_button__1at3X",draw:"style_draw__3stwz",meet:"style_meet__123VC",center:"style_center__sy0eo",circle:"style_circle__3Eyo5",ghost:"style_ghost__1Fjw6",noGhost:"style_noGhost__2Sb8q",large:"style_large__3LyJN",normal:"style_normal__11_ON",small:"style_small__1Emix",bg:"style_bg__2J70u",formContent:"style_formContent__4dO_-",inputStyle:"style_inputStyle__1q4MQ",spaceBetween:"style_spaceBetween__3z8ro",title:"style_title__3a04h",extra:"style_extra__19CuP",search:"style_search__2RJN1",label:"style_label__2Laus",scrollYBar:"style_scrollYBar__1B6yl",wrapper:"style_wrapper__7mA5m",header:"style_header__BOllP",content:"style_content__3eTgN",footer:"style_footer__2cguI",space:"style_space__3Z8lh"}},69:function(e,t,a){e.exports={button:"style_button__Gr2Wr",draw:"style_draw__wtBUq",meet:"style_meet__1GkJX",center:"style_center__3Y8QC",circle:"style_circle__2mMLb",ghost:"style_ghost__5zLsY",noGhost:"style_noGhost__31iKN",large:"style_large__2SOmX",normal:"style_normal__3ZxRd",small:"style_small__3svg6",bg:"style_bg__Qw8qx",formContent:"style_formContent__26h-A",inputStyle:"style_inputStyle__2I7HR",spaceBetween:"style_spaceBetween__2aeVb",title:"style_title__1vKXQ",extra:"style_extra__18-3n",search:"style_search__2wgo4",label:"style_label__3VaBP",scrollYBar:"style_scrollYBar__1nzl0",container:"style_container__2AEaN",table:"style_table__2Mf03",header:"style_header__11PRP",body:"style_body__2oyck",th:"style_th__3efYD",space:"style_space__14z43",formItem:"style_formItem__oIhY3","ant-form-item-control":"style_ant-form-item-control__3ZAvz","ant-form-item-explain":"style_ant-form-item-explain__2GzTa","ant-form-item-extra":"style_ant-form-item-extra__zGDxd",customRadio:"style_customRadio__H5R16"}}},[[201,1,2]]]);
//# sourceMappingURL=main.343b3f07.chunk.js.map